<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>API ì‘ë‹µ í›„ì²˜ë¦¬ - í´ë¼ì´ì–¸íŠ¸ ê¸°ë°˜ ì½”ë“œ ì‹¤í–‰</title>
    <script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
    <style>
        :root {
            --bg-primary: #1a1a2e;
            --bg-secondary: #16213e;
            --bg-tertiary: #0f3460;
            --text-primary: #eaeaea;
            --text-secondary: #a0a0a0;
            --accent: #e94560;
            --accent-secondary: #00d9ff;
            --code-bg: #0d1117;
            --border-color: #30363d;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            line-height: 1.7;
            padding: 2rem;
        }

        .container { max-width: 1200px; margin: 0 auto; }

        h1 {
            font-size: 2.2rem;
            color: var(--accent);
            margin-bottom: 0.5rem;
            border-bottom: 3px solid var(--accent);
            padding-bottom: 1rem;
        }

        h1 + p {
            color: var(--text-secondary);
            font-size: 1.1rem;
            margin-bottom: 2rem;
        }

        h2 {
            font-size: 1.5rem;
            color: var(--accent-secondary);
            margin: 2rem 0 1rem;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 1rem 0;
            background: var(--bg-secondary);
            border-radius: 8px;
            overflow: hidden;
        }

        th, td {
            padding: 0.8rem 1rem;
            text-align: left;
            border-bottom: 1px solid var(--border-color);
        }

        th {
            background: var(--bg-tertiary);
            color: var(--accent-secondary);
            font-weight: 600;
        }

        .mermaid {
            background: var(--bg-secondary);
            border-radius: 8px;
            padding: 1.5rem;
            margin: 1rem 0;
            text-align: center;
        }

        .section {
            background: var(--bg-secondary);
            border-radius: 12px;
            padding: 1.5rem;
            margin: 1.5rem 0;
            border: 1px solid var(--border-color);
        }

        .stat-box {
            display: inline-block;
            background: var(--bg-tertiary);
            border: 1px solid var(--accent-secondary);
            border-radius: 8px;
            padding: 1rem 1.5rem;
            margin: 0.5rem;
            text-align: center;
        }

        .stat-box .value {
            font-size: 2rem;
            color: var(--accent);
            font-weight: bold;
        }

        .stat-box .label {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        hr {
            border: none;
            border-top: 1px solid var(--border-color);
            margin: 2rem 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>API ì‘ë‹µ í›„ì²˜ë¦¬</h1>
        <p>ProgramOfThought í›„ì²˜ë¦¬ - ìŠ¤í‚¤ë§ˆ ê¸°ë°˜ ì½”ë“œ ìƒì„± & í´ë¼ì´ì–¸íŠ¸ ì‹¤í–‰</p>

        <!-- ProgramOfThought ê°œë… -->
        <div class="section">
            <strong>ProgramOfThought íŒ¨í„´:</strong> LLMì´ ëŒ€ìš©ëŸ‰ ë°ì´í„°ë¥¼ ì§ì ‘ ì²˜ë¦¬í•˜ì§€ ì•Šê³ ,
            <strong>ìŠ¤í‚¤ë§ˆë¥¼ ë³´ê³  ì½”ë“œë¥¼ ìƒì„±</strong> â†’ ìƒì„±ëœ ì½”ë“œê°€ ì›ë³¸ ë°ì´í„°ë¥¼ ì²˜ë¦¬
        </div>

        <!-- í•µì‹¬ ìˆ˜ì¹˜ -->
        <div style="text-align: center; margin: 2rem 0;">
            <div class="stat-box">
                <div class="value">26.6MB</div>
                <div class="label">í´ë¼ì´ì–¸íŠ¸ ë°ì´í„°</div>
            </div>
            <div class="stat-box">
                <div class="value">1.3KB</div>
                <div class="label">ì„œë²„ ì „ì†¡ (ìŠ¤í‚¤ë§ˆ)</div>
            </div>
            <div class="stat-box">
                <div class="value">~500B</div>
                <div class="label">ì½”ë“œ ìˆ˜ì‹ </div>
            </div>
        </div>

        <hr>

        <!-- ì „ì²´ íë¦„ -->
        <h2>ì „ì²´ íë¦„</h2>
        <p>ğŸ“¡ API Request ë„êµ¬ ì‹¤í–‰ ì‹œì ë¶€í„° ì‹œì‘ (ì—ëŸ¬ ë¦¬íŠ¸ë¼ì´ í¬í•¨)</p>
        <div class="mermaid">
flowchart TB
    subgraph Client["í´ë¼ì´ì–¸íŠ¸ (ë¸Œë¼ìš°ì €)"]
        IDB["ğŸ’¾ IndexedDB<br/>(API ì‘ë‹µ ìºì‹œ)"]
        Schema["ğŸ“‹ ìŠ¤í‚¤ë§ˆ ì¶”ì¶œ"]
        Exec["âš¡ eval(code)"]
        Check{ì„±ê³µ?}
        Result["âœ… ê²°ê³¼"]
        Error["âŒ ì—ëŸ¬"]
    end

    WS["ğŸ”Œ WebSocket"]

    subgraph Server["ì„œë²„ (Backend)"]
        subgraph Processor["ğŸ“¡ API ì‘ë‹µ ì²˜ë¦¬ ëª¨ë“ˆ"]
            P1["â‘  ìŠ¤í‚¤ë§ˆ ìš”ì²­"]
            P2["â‘¡ ìŠ¤í‚¤ë§ˆ ìˆ˜ì‹ "]
            P3["â‘¢ LLM ì½”ë“œ ìƒì„±"]
            P4["â‘£ ì½”ë“œ ì „ì†¡"]
            P5["â‘¤ ê²°ê³¼ ìˆ˜ì‹ "]
            P6["â‘¥ ì—ëŸ¬ ì²˜ë¦¬"]
        end
        Gen["ğŸ¤– LLM"]
        Next["â¡ï¸ ê²°ê³¼ ì‘ë‹µ"]
    end

    P1 -->|"ìš”ì²­"| WS
    WS --> IDB
    IDB --> Schema
    Schema -->|"ì‘ë‹µ"| WS
    WS --> P2
    P2 --> P3
    P3 --> Gen
    Gen --> P3
    P3 --> P4
    P4 -->|"ì½”ë“œ"| WS
    WS --> Exec
    IDB -.->|"ì›ë³¸ ë°ì´í„°"| Exec
    Exec --> Check
    Check -->|"Yes"| Result
    Check -->|"No"| Error
    Result -->|"ê²°ê³¼"| WS
    WS --> P5
    P5 --> Next
    Error -->|"ì—ëŸ¬+ìŠ¤í‚¤ë§ˆ"| WS
    WS --> P6
    P6 -->|"ì¬ì‹œë„"| P3

    style IDB fill:#e74c3c,color:#fff
    style Schema fill:#9b59b6,color:#fff
    style Processor fill:#0f3460
    style Gen fill:#3498db,color:#fff
    style Exec fill:#f39c12,color:#000
    style Check fill:#f39c12,color:#000
    style Result fill:#27ae60,color:#fff
    style Error fill:#e74c3c,color:#fff
    style Next fill:#1abc9c,color:#fff
    style WS fill:#6c757d,color:#fff
        </div>

        <table>
            <thead>
                <tr><th>ë‹¨ê³„</th><th>ì²˜ë¦¬ ëª¨ë“ˆ ë™ì‘</th><th>í†µì‹ </th><th>í¬ê¸°</th></tr>
            </thead>
            <tbody>
                <tr><td>â‘ </td><td>ìŠ¤í‚¤ë§ˆ ìš”ì²­</td><td>â†’ Client (WebSocket)</td><td>-</td></tr>
                <tr><td>â‘¡</td><td>ìŠ¤í‚¤ë§ˆ ìˆ˜ì‹ </td><td>â† Client (IndexedDBì—ì„œ ì¶”ì¶œ)</td><td>~1.3KB</td></tr>
                <tr><td>â‘¢</td><td>LLM ì½”ë“œ ìƒì„±</td><td>ë‚´ë¶€ (ìŠ¤í‚¤ë§ˆ ê¸°ë°˜ JS ì½”ë“œ ìƒì„±)</td><td>-</td></tr>
                <tr><td>â‘£</td><td>ì½”ë“œ ì „ì†¡</td><td>â†’ Client (WebSocket)</td><td>~500B</td></tr>
                <tr><td>â‘¤</td><td>ê²°ê³¼ ìˆ˜ì‹ </td><td>â† Client (ì„±ê³µ ì‹œ) â†’ ê²°ê³¼ ì‘ë‹µ</td><td>~100B</td></tr>
                <tr><td>â‘¥</td><td>ì—ëŸ¬ ì²˜ë¦¬</td><td>â† Client (ì‹¤íŒ¨ ì‹œ) â†’ â‘¢ ì¬ì‹œë„</td><td>~2KB</td></tr>
            </tbody>
        </table>

    </div>

    <script>
        mermaid.initialize({
            startOnLoad: true,
            theme: 'dark',
            themeVariables: {
                primaryColor: '#0f3460',
                primaryTextColor: '#eaeaea',
                primaryBorderColor: '#30363d',
                lineColor: '#00d9ff',
                secondaryColor: '#16213e',
                tertiaryColor: '#1a1a2e'
            }
        });

        window.addEventListener('load', function() {
            setTimeout(function() {
                const diagrams = document.querySelectorAll('.mermaid svg');
                diagrams.forEach(diagram => {
                    const foreignObjects = diagram.querySelectorAll('foreignObject');
                    foreignObjects.forEach(fo => {
                        const currentWidth = parseInt(fo.getAttribute('width')) || 150;
                        fo.setAttribute('width', Math.max(currentWidth * 1.5, 250));
                    });
                });
            }, 500);
        });
    </script>
</body>
</html>
